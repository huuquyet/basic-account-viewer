(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{332:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var r=n(7),a=n.n(r),c=n(3),o=n.n(c),s=n(0),i=n(9),l=n(330),u=n(2),d=n(333),j=n(653),b=n(650),f=n(21),h=n(5);function x(){return Object(h.jsx)(u.a,{style:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#fff"},children:Object(h.jsx)(f.a,{children:"Settings!"})})}var p=n(651),O=n(652),y=n(150),m=n(58),v=n(4),g=n(77),C=n(334),w=n(152),k=n(61),_=n(192),S=n(193),I=[{name:"testnet",passphrase:k.Networks.TESTNET,serverUrl:"https://horizon-testnet.stellar.org"},{name:"public",passphrase:k.Networks.PUBLIC,serverUrl:"https://horizon.stellar.org"}],E=S.isConnected(),P="https://freighter.app/",B=function(){var e=Object(s.useState)(I[0]),t=a()(e,2),n=t[0],r=t[1],c=Object(s.useState)(),i=a()(c,2),l=i[0],d=i[1],j=Object(s.useState)(),b=a()(j,2),x=b[0],p=b[1],O=Object(s.useState)(!1),v=a()(O,2),C=v[0],k=v[1],B=Object(s.useState)(),T=a()(B,2),D=T[0],L=T[1];Object(s.useEffect)((function(){!function(e,t,n){t(e?new _.Server(e.serverUrl):void 0),n(void 0)}(n,d,L)}),[n]),Object(s.useEffect)((function(){l&&x?(k(!0),function(e,t){var n,r,a,c,s,i;return o.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,o.a.awrap(e.loadAccount(t.publicKey()));case 3:return n=l.sent,r=n.balances.map((function(e){return"native"===e.asset_type?{balance:e.balance,assetCode:"XLM"}:"credit_alphanum4"===e.asset_type||"credit_alphanum12"===e.asset_type?{balance:e.balance,assetCode:null==e?void 0:e.asset_code,assetIssuer:null==e?void 0:e.asset_issuer}:"liquidity_pool_shares"===e.asset_type?{balance:e.balance,liquidity_pool_id:null==e?void 0:e.liquidity_pool_id}:void 0})),l.next=7,o.a.awrap(e.transactions().forAccount(n.accountId()).order("asc").limit(1).call().then((function(e){return e.records.pop()})).then((function(e){return null==e?void 0:e.operations()})).then((function(e){return null==e?void 0:e.records})).catch(console.error));case 7:if(l.t0=l.sent,l.t0){l.next=10;break}l.t0=[];case 10:return a=l.t0,c=a.find((function(e){return"create_account"===e.type})),s=c?c.created_at:"-",i=c?c.source_account:"-",l.abrupt("return",{isError:!1,accountId:n.accountId(),createdAt:s,createdBy:i,balances:r});case 17:return l.prev=17,l.t1=l.catch(0),l.abrupt("return",{isError:!0,error:l.t1});case 20:case"end":return l.stop()}}),null,null,[[0,17]],Promise)}(l,x).then((function(e){e.isError?L(void 0):L(e),k(!1)}))):L(void 0)}),[l,x,k]);return Object(h.jsxs)(u.a,{style:z.container,children:[Object(h.jsxs)(u.a,{style:z.buttons,children:[Object(h.jsx)(u.a,{style:z.row,children:I.map((function(e){return Object(h.jsx)(y.a,{onPress:function(){return r(e)},color:e.name===n.name?"#08f":"gray",title:e.name},e.name)}))}),x?Object(h.jsx)(y.a,{color:"#841584",onPress:function(){p(void 0)},title:"Disconnect"}):Object(h.jsx)(y.a,{onPress:function(){(function(){var e,t;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,E){n.next=3;break}return n.abrupt("return",{isError:!0,error:new Error("Freighter not available")});case 3:return n.next=5,o.a.awrap(S.getPublicKey());case 5:return e=n.sent,t=_.Keypair.fromPublicKey(e),n.abrupt("return",{isError:!1,keypair:t});case 10:return n.prev=10,n.t0=n.catch(0),n.abrupt("return",{isError:!0,error:n.t0});case 13:case"end":return n.stop()}}),null,null,[[0,10]],Promise)})().then((function(e){console.log(e),e.isError||p(e.keypair)}))},title:"Connect wallet",disabled:!E})]}),!D||null!=D&&D.isError?Object(h.jsx)(u.a,{style:z.infoContainer,children:E?Object(h.jsx)(f.a,{children:C?"Loading...":x?"Couldn't find account information, check that you have correct network selected.":"Connect your wallet to show account information."}):Object(h.jsxs)(f.a,{children:["Freighter extension is not installed",Object(h.jsx)("br",{}),"Get it from"," ",Object(h.jsx)(g.a,{onPress:function(){return w.a(P)},children:Object(h.jsx)(f.a,{style:z.link,children:P})})]})}):Object(h.jsxs)(u.a,{style:z.container,children:[Object(h.jsxs)(u.a,{style:z.accountContainer,children:[Object(h.jsx)(f.a,{children:Object(h.jsx)("strong",{children:"Account"})}),Object(h.jsx)(A,{accountId:null==D?void 0:D.accountId,network:n}),Object(h.jsx)(f.a,{children:"Created by:"}),Object(h.jsx)(A,{accountId:null==D?void 0:D.createdBy,network:n}),Object(h.jsxs)(f.a,{children:["Created at:",Object(h.jsx)("br",{}),null==D?void 0:D.createdAt]})]}),Object(h.jsx)(f.a,{children:Object(h.jsx)("strong",{children:"Balances"})}),Object(h.jsx)(m.a,{style:z.column,contentContainerStyle:z.scrollContainer,children:null==D?void 0:D.balances.map((function(e,t){return Object(h.jsx)(u.a,{style:z.assetContainer,children:Object(h.jsx)(q,{asset:e,network:n})},"asset_"+t)}))})]})]})},A=function(e){var t=e.accountId,n="https://stellar.expert/explorer/"+e.network.name+"/account/"+t;return Object(h.jsxs)(u.a,{style:z.detailContainer,children:[Object(h.jsx)(g.a,{onPress:function(){return w.a(n)},children:Object(h.jsx)(f.a,{style:z.link,children:Object(h.jsx)("strong",{children:T(t)})})}),Object(h.jsx)(g.a,{onPress:function(){return C.a(t)},children:Object(h.jsx)(O.a,{name:"copy",size:18})})]})},q=function(e){var t=e.asset,n=e.network;return Object(h.jsxs)(u.a,{style:z.detailContainer,children:[Object(h.jsxs)(u.a,{style:z.row,children:[Object(h.jsx)(u.a,{style:[z.avatarBackground,{backgroundColor:L()}],children:Object(h.jsx)(f.a,{style:z.assetAvatar,children:t.assetCode?t.assetCode.slice(0,3):"+"})}),t.liquidity_pool_id?Object(h.jsxs)(u.a,{style:z.assetText,children:[Object(h.jsx)(f.a,{children:Object(h.jsx)("strong",{children:D(t.balance)+" pool shares"})}),Object(h.jsxs)(f.a,{children:["Liquidity pool id: ",null==t?void 0:t.liquidity_pool_id.slice(0,18),"..."]})]}):Object(h.jsxs)(u.a,{style:z.assetText,children:[Object(h.jsx)(f.a,{children:Object(h.jsx)("strong",{children:D(t.balance)+" "+t.assetCode})}),Object(h.jsx)(f.a,{children:T(null==t?void 0:t.assetIssuer)})]})]}),Object(h.jsx)(g.a,{onPress:function(){return w.a(function(){var e="https://stellar.expert/explorer/"+n.name+"/",r="liquidity-pool/"+(null==t?void 0:t.liquidity_pool_id),a="asset/"+(null==t?void 0:t.assetCode)+(t.assetIssuer?"-"+t.assetIssuer:"");return e+(t.liquidity_pool_id?""+r:""+a)}())},children:Object(h.jsx)(O.a,{name:"external-link-alt",size:18})})]})},T=function(e){return e?e.slice(0,12)+"..."+e.slice(-12):void 0},D=function(e){return Number(e>0&&e<1?Math.round(e+"e8")+"e-8":Math.round(e+"e2")+"e-2")},L=function(){return"#000000".replace(/0/g,(function(){return(~~(16*Math.random())).toString(16)}))},z=v.a.create({container:{flex:1,padding:3,backgroundColor:"#fff"},row:{flexDirection:"row"},column:{flexDirection:"column"},link:{textDecorationLine:"underline"},buttons:{flexDirection:"row",justifyContent:"space-between"},scrollContainer:{paddingTop:5},accountContainer:{flexDirection:"column",borderBottomWidth:"thin",padding:5},assetContainer:{borderBottomWidth:1,borderColor:"gray",padding:10},detailContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},assetText:{flexDirection:"column",marginLeft:10},avatarBackground:{alignItems:"center",justifyContent:"center",width:42,height:42,borderRadius:42},assetAvatar:{textAlign:"center",backgroundColor:"none",fontSize:14,lineHeight:14},infoContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:10}}),N=Object(p.a)();function K(){return Object(h.jsx)(b.a,{children:Object(h.jsxs)(N.Navigator,{screenOptions:function(e){var t=e.route;return{tabBarIcon:function(e){var n,r=e.focused;return"Home"===t.name?n="home":"Settings"===t.name&&(n="cog"),Object(h.jsx)(O.a,{name:n,size:26,style:{marginBottom:-3},color:r?"tomato":"gray"})},tabBarActiveTintColor:"tomato",tabBarInactiveTintColor:"gray"}},children:[Object(h.jsx)(N.Screen,{name:"Home",component:B}),Object(h.jsx)(N.Screen,{name:"Settings",component:x})]})})}function M(e){var t=Object(s.useState)(!1),n=a()(t,2),r=n[0],c=n[1];return r||e.skipLoadingScreen?Object(h.jsxs)(u.a,{style:{flex:1,backgroundColor:"#fff",width:"100%",maxWidth:"36rem",alignSelf:"center"},children:["ios"===i.a.OS&&Object(h.jsx)(l.a,{barStyle:"default"}),Object(h.jsx)(K,{})]}):Object(h.jsx)(d.a,{startAsync:U,onError:F,onFinish:function(){return function(e){e(!0)}(c)}})}function U(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(Promise.all([j.a.loadAsync([n(640)])]));case 2:case"end":return e.stop()}}),null,null,null,Promise)}function F(e){console.warn(e)}},341:function(e,t,n){e.exports=n(642)},366:function(e,t){},381:function(e,t){},382:function(e,t){},583:function(e,t){},585:function(e,t){},640:function(e,t,n){e.exports=n.p+"static/media/freighter.9391c7b8.png"}},[[341,1,2]]]);
//# sourceMappingURL=app.c878d75d.chunk.js.map